languages:
  ruby: 2.0.0-p247
setup:
- scripts:
  - wget -O - http://debian.neo4j.org/neotechnology.gpg.key | sudo apt-key add -
  - echo 'deb http://debian.neo4j.org/repo stable/' > /etc/apt/sources.list.d/neo4j.list
  - apt-get update
  - apt-get install neo4j=1.9.4 -y --force-yes
  - sudo mkdir /crunchbase && sudo chmod a+w /crunchbase
  - for repo in `grep ":path => '/crunchbase/" Gemfile | cut -d ' ' -f 2 | sed -r "s/[',]//g"`; do git clone git@github.com:/crunchbase/$repo.git /crunchbase/$repo; done
  - bundle install
test:
  machines: 1
  scripts:
  - tests:
      script: rake ci_spec
      timeout: 1800
      xunit: spec/reports